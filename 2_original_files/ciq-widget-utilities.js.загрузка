
function serverFetch(url,payload,contentType,callback,additionalParams){
	function getHostName(url) {
		try{
			return url.match(/:\/\/(.[^/]+)/)[1];
		}catch(e){
			return "";
		}
	};
	function getAjaxServer(url){
		var server=false;
		var crossDomain=true;
		if(url){
			if(getHostName(url)=="") crossDomain=false;
			if(getHostName(url)==getHostName(window.location.href)) crossDomain=false;
		}
		if(crossDomain && window.XDomainRequest){
			server = new XDomainRequest();
			return server;
		}
		try{
			server = new XMLHttpRequest();
		}catch(e){
			alert("ajax not supported in browser");
		}
		return server;
	};
	function postIt(url,payload,contentType,additionalParams){
		var server=getAjaxServer(url);
		if(!server) return false;
		if(!contentType) contentType="application/x-www-form-urlencoded";
		var epoch=new Date();
		if(url.indexOf('?')==-1) url+="?ciq1"; // + epoch.getTime();
		else url+="&ciq1"; // + epoch.getTime();
		var method=payload?"POST":"GET";
		if(!window.XDomainRequest){
			server.open(method, url, true);
			if(payload) server.setRequestHeader('Content-Type', contentType);
		}else{
			if(server.constructor==XDomainRequest) url=url.replace("https:",window.location.protocol);
			server.open(method, url, true);
			server.onload=function(){callback(server.responseText==""?204:200,server.responseText,additionalParams);};
			server.onerror=function(){callback(0, null, additionalParams);};
			server.onprogress=function(){};
		}
		server.onreadystatechange=function(){
			if(server.readyState==4){callback(server.status,server.responseText,additionalParams);}
		};
		try{server.send(payload);}catch(e){callback(0,null,additionalParams);}
		return true;
	};
	return postIt(url,payload,contentType,additionalParams);
};


function getETUTCOffset(date){
	switch (date.getMonth()){
	case 3:
	case 4:
	case 5:
	case 6:
	case 7:
	case 8:
	case 9:
		return -240;
	case 0:
	case 1:
	case 11:
		return -300;
	case 2: {
		if(date.getDate()<8) return -300;
		else if(date.getDate()>=14) return -240;
		else if(date.getDate()%7>date.getDay()) {
			if(date.getDay()!=0) return -240;
			else if(date.getHours()<3) return -300;
			else return -240;
		}
		else return -300;
		}
	case 10: {
		if(date.getDate()>=7) return -300;
		else if(date.getDate()%7>date.getDay()){
			if(date.getDay()!=0) return -300;
			else if(date.getHours()==0) return -240;
			else if(date.getHours()==1){  //which 1 is it?
				if((new Date(date.getTime()-1000*60*60)).getHours()==0) return -240;
			}
			return -300;
		}
		else return -240;
		}
	}
}

function mmddyyyy(dt){
	var m=dt.getMonth()+1;
	if(m<10) m="0" + m;
	var d=dt.getDate();
	if(d<10) d="0" + d;
	return m + "/" + d + "/" + dt.getFullYear();
};

function hhmmss(dt){
	var h=dt.getHours();
	if(h<10) h="0" + h;
	var m=dt.getMinutes();
	if(m<10) m="0" + m;
	var s=dt.getSeconds();
	if(s<10) s="0" + s;
	return h + ":" + m + ":" + s;
};

function ampmTime(date){
	var ampm="AM";
	var hrmn=date.toTimeString().split(" ")[0].split(":");
	if(hrmn[0]>=12) ampm="PM";
	if(hrmn[0]>12) hrmn[0]-=12;
	if(hrmn[0]==0) hrmn[0]=12;
	return Number(hrmn[0])+":"+hrmn[1]+ampm;
}

function ampmTimeTz(date){
	var ampm="am";
	var tCmpnt=date.toTimeString().split(" ");
	var hrmn=tCmpnt[0].split(":");
	if(hrmn[0]>=12) ampm="pm";
	if(hrmn[0]>12) hrmn[0]-=12;
	if(hrmn[0]==0) hrmn[0]=12;
	var ret=Number(hrmn[0])+":"+hrmn[1]+ampm+" ";
	if(tCmpnt.length>2) ret+=tCmpnt.splice(2).join(" ").replace(/[\(\)]/g,"");
	else ret+=tCmpnt[1];
	return ret;
}

var secCodeTypeMap=null;
function SECFilingTypes(code){
	if(!secCodeTypeMap) secCodeTypeMap={
		"10-12B":	"Registration Statements",
		"10-12B/A":	"Registration Statements",
		"10-12G":	"Registration Statements",
		"10-12G/A":	"Registration Statements",
		"10-C":		"Report by Issuers of Securities Quoted on NASDAQ",
		"10-C/A":	"Report by Issuers of Securities Quoted on NASDAQ - Amendment",
		"10-K":		"Annual Reports",
		"10-K/A":	"Annual Reports",
		"10-K405":	"Annual Reports",
		"10-K405/A":"Annual Reports",
		"10KSB":	"Annual Reports",
		"10KSB/A":	"Annual Reports",
		"10KSB40":	"Annual Reports",
		"10KSB40/A":"Annual Reports",
		"10-KT":	"Annual Reports",
		"10-KT/A":	"Annual Reports",
		"10KT405":	"Annual Reports",
		"10KT405/A":"Annual Reports",
		"10-Q":		"Quarterly Reports",
		"10-Q/A":	"Quarterly Reports",
		"10QSB":	"Quarterly Reports",
		"10QSB/A":	"Quarterly Reports",
		"10-QT":	"Quarterly Reports",
		"10-QT/A":	"Quarterly Reports",
		"10SB12B":	"Registration Statements",
		"10SB12B/A":"Registration Statements",
		"10SB12G":	"Registration Statements",
		"10SB12G/A":"Registration Statements",
		"11-K":		"Annual Reports",
		"11-K/A":	"Annual Reports",
		"11-KT":	"Annual Reports",
		"11-KT/A":	"Annual Reports",
		"13F-E":	"Quarterly Reports",
		"13F-E/A":	"Quarterly Reports",
		"13F-HR":	"Quarterly Reports",
		"13F-HR/A":	"Quarterly Reports",
		"13F-NT":	"Quarterly Reports",
		"13F-NT/A":	"Quarterly Reports",
		"144":		"Insider Transactions",
		"144/A":	"Insider Transactions",
		"15-12B":	"Registration Statements",
		"15-12B/A":	"Registration Statements",
		"15-12G":	"Registration Statements",
		"15-12G/A":	"Registration Statements",
		"15-15D":	"Comment Letters",
		"15-15D/A":	"Comment Letters",
		"18-12B":	"Registration Statements",
		"18-12B/A":	"Registration Statements",
		"18-K":		"Annual Reports",
		"18-K/A":	"Annual Reports",
		"20-F":		"Annual Reports",
		"20-F/A":	"Annual Reports",
		"20FR12B":	"Registration Statements",
		"20FR12B/A":"Registration Statements",
		"20FR12G":	"Registration Statements",
		"20FR12G/A":"Registration Statements",
		"24F-1":	"Registration Statements",
		"24F-1/A":	"Registration Statements",
		"24F-2EL":	"Annual Reports",
		"24F-2EL/A":"Annual Reports",
		"24F-2NT":	"Annual Reports",
		"24F-2NT/A":"Annual Reports",
		"24F-2TM":	"Annual Reports",
		"24F-2TM/A":"Annual Reports",
		"3":		"Insider Transactions",
		"3/A":		"Insider Transactions",
		"305B2":	"Statement of Eligibility of Corporations Designated to Act as Trustees",
		"305B2/A":	"Statement of Eligibility of Corporations Designated to Act as Trustees - Amendment",
		"35-APP":	"Statement Concerning Proposed Transactions",
		"35-APP/A":	"Statement Concerning Proposed Transactions - Amendment",
		"35-CERT":	"Certificate Concerning Terms and Conditions of Transactions",
		"35-CERT/A":"Certificate Concerning Terms and Conditions of Transactions - Amendment",
		"4":		"Insider Transactions",
		"4/A":		"Insider Transactions",
		"40-17F1":	"Certificate of Accounting of Securities in the Custody of Management Investment Companies",
		"40-17F1/A":"Certificate of Accounting of Securities in the Custody of Management Investment Companies - Amendment",
		"40-17F2":	"Certificate of Accounting of Securities in the Custody of Management Investment Companies",
		"40-17F2/A":"Certificate of Accounting of Securities in the Custody of Management Investment Companies - Amendment",
		"40-17G":	"Fidelity Bond of Management Investment Companies",
		"40-17G/A":	"Fidelity Bond of Management Investment Companies - Amendment",
		"40-24B2":	"Sales Literature of Management Investment Companies",
		"40-24B2/A":"Sales Literature of Management Investment Companies - Amendment",
		"40-8B25":	"Application Requesting Extensions of Time for Filing Certain Information, Documents or Report",
		"40-8B25/A":"Application Requesting Extensions of Time for Filing Certain Information, Documents or Report - Amendment",
		"40-8F-2":	"Registration Statements",
		"40-8F-2/A":"Registration Statements",
		"40-8F-A":	"Registration Statements",
		"40-8F-A/A":"Registration Statements",
		"40-8F-B":	"Registration Statements",
		"40-8F-B/A":"Registration Statements",
		"40-8F-L":	"Registration Statements",
		"40-8F-L/A":"Registration Statements",
		"40-8F-M":	"Registration Statements",
		"40-8F-M/A":"Registration Statements",
		"40-F":		"Annual Reports",
		"40-F/A":	"Annual Reports",
		"40FR12B":	"Annual Reports",
		"40FR12B/A":"Annual Reports",
		"40FR12G":	"Annual Reports",
		"40FR12G/A":"Annual Reports",
		"424A":		"Proxies and Info Statements",
		"424A/A":	"Proxies and Info Statements",
		"424B1":	"Proxies and Info Statements",
		"424B1/A":	"Proxies and Info Statements",
		"424B2":	"Proxies and Info Statements",
		"424B2/A":	"Proxies and Info Statements",
		"424B3":	"Proxies and Info Statements",
		"424B3/A":	"Proxies and Info Statements",
		"424B4":	"Proxies and Info Statements",
		"424B4/A":	"Proxies and Info Statements",
		"424B5":	"Proxies and Info Statements",
		"424B5/A":	"Proxies and Info Statements",
		"424B7":	"Proxies and Info Statements",
		"424B7/A":	"Proxies and Info Statements",
		"425":		"Business-Combination Transaction Communications",
		"425/A":	"Business-Combination Transaction Communications - Amendment",
		"485A24E":	"Registration Statements",
		"485A24E/A":"Registration Statements",
		"485A24F":	"Registration Statements",
		"485A24F/A":"Registration Statements",
		"485APOS":	"Registration Statements",
		"485APOS/A":"Registration Statements",
		"485B24E":	"Registration Statements",
		"485B24E/A":"Registration Statements",
		"485B24F":	"Registration Statements",
		"485B24F/A":"Registration Statements",
		"485BPOS":	"Registration Statements",
		"485BPOS/A":"Registration Statements",
		"485BXT":	"Registration Statements",
		"485BXT/A":	"Registration Statements",
		"485BXTF":	"Registration Statements",
		"485BXTF/A":"Registration Statements",
		"486A24E":	"Registration Statementss",
		"486A24E/A":"Registration Statements",
		"486APOS":	"Registration Statements",
		"486APOS/A":"Registration Statements",
		"486B24E":	"Registration Statements",
		"486B24E/A":"Registration Statements",
		"486BPOS":	"Registration Statements",
		"486BPOS/A":"Registration Statements",
		"487":		"Pre-Effective Pricing Amendment",
		"487/A":	"Pre-Effective Pricing Amendment - Amendment",
		"497":		"Definitive Materials",
		"497/A":	"Definitive Materials - Amendment",
		"497AD":	"Advertising by Certain Investment Companies",
		"497AD/A":	"Advertising by Certain Investment Companies - Amendment",
		"497H2":	"Proxies and Info Statements",
		"497H2/A":	"Proxies and Info Statements",
		"497J":		"Certification of No Changes in Definitive Materials",
		"497J/A":	"Certification of No Changes in Definitive Materials - Amendment",
		"497K1":	"Profile of Open-End Management Investment Companies",
		"497K1/A":	"Profile of Open-End Management Investment Companies - Amendment",
		"497K2":	"Profile of Open-End Management Investment Companies",
		"497K2/A":	"Profile of Open-End Management Investment Companies - Amendment",
		"497K3A":	"Profile of Open-End Management Investment Companies",
		"497K3A/A":	"Profile of Open-End Management Investment Companies - Amendment",
		"497K3B":	"Profile of Open-End Management Investment Companies",
		"497K3B/A":	"Profile of Open-End Management Investment Companies - Amendment",
		"5":		"Insider Transactions",
		"5/A":		"Insider Transactions",
		"6-K":		"Report of Foreign Private Issuers",
		"6-K/A":	"Report of Foreign Private Issuers - Amendment",
		"8-A12B":	"Registration Statements",
		"8-A12B/A":	"Registration Statements",
		"8A12BEF":	"Registration Statements",
		"8A12BEF/A":"Registration Statements",
		"8A12BT":	"Registration Statements",
		"8A12BT/A":	"Registration Statements",
		"8-A12G":	"Registration Statements",
		"8-A12G/A":	"Registration Statements",
		"8-B12B":	"Registration Statementss",
		"8-B12B/A":	"Registration Statements",
		"8-B12G":	"Registration Statements",
		"8-B12G/A":	"Registration Statements",
		"8-K":		"8K-Related",
		"8-K/A":	"8K-Related",
		"8-K12B":	"8K-Related",
		"8-K12B/A":	"8K-Related",
		"8-K12G3":	"8K-Related",
		"8-K12G3/A":"8K-Related",
		"8-K15D5":	"8K-Related",
		"8-K15D5/A":"8K-Related",
		"ANNLRPT":	"Annual Reports",
		"ANNLRPT/A":"Annual Reports",
		"ARS":		"Annual Reports",
		"ARS/A":	"Annual Reports",
		"AW":		"Amendment Withdrawal Requests",
		"AW/A":		"Amendment Withdrawal Requests - Amendment",
		"AW WD":	"Amendment Withdrawal (Withdraw Duplicate) Requests",
		"AW WD/A":	"Amendment Withdrawal (Withdraw Duplicate) Requests - Amendment",
		"BW-2":		"Quarterly Reports",
		"BW-2/A":	"Quarterly Reports",
		"BW-3":		"I.B.R.D. (World Bank) Distribution of Obligations Report",
		"BW-3/A":	"I.B.R.D. (World Bank) Distribution of Obligations Report - Amendment",
		"CB":		"Rights/Exchange/Tender Offer Notifications/Responses",
		"CB/A":		"Rights/Exchange/Tender Offer Notifications/Responses - Amendment",
		"CORRESP":	"Correspondence",
		"CORRESP/A":"Correspondence - Amendment",
		"DEF13E3":	"Proxies and Info Statements",
		"DEF13E3/A":"Proxies and Info Statements",
		"DEF 14A":	"Proxies and Info Statementss",
		"DEF 14A/A":"Proxies and Info Statements",
		"DEF 14C":	"Proxies and Info Statements",
		"DEF 14C/A":"Proxies and Info Statements",
		"DEFA14A":	"Proxies and Info Statements",
		"DEFA14A/A":"Proxies and Info Statements",
		"DEFA14C":	"Proxies and Info Statements",
		"DEFA14C/A":"Proxies and Info Statements",
		"DEFC14A":	"Proxies and Info Statements",
		"DEFC14A/A":"Proxies and Info Statements",
		"DEFC14C":	"Proxies and Info Statements",
		"DEFC14C/A":"Proxies and Info Statements",
		"DEFM14A":	"Proxies and Info Statements",
		"DEFM14A/A":"Proxies and Info Statements",
		"DEFM14C":	"Proxies and Info Statements",
		"DEFM14C/A":"Proxies and Info Statements",
		"DEFN14A":	"Proxies and Info Statements",
		"DEFN14A/A":"Proxies and Info Statements",
		"DEFR14A":	"Proxies and Info Statements",
		"DEFR14A/A":"Proxies and Info Statements",
		"DEFR14C":	"Proxies and Info Statements",
		"DEFR14C/A":"Proxies and Info Statements",
		"DEFS14A":	"Proxies and Info Statements",
		"DEFS14A/A":"Proxies and Info Statements",
		"DEFS14C":	"Proxies and Info Statements",
		"DEFS14C/A":"Proxies and Info Statements",
		"DEL AM":	"Registration Effectiveness-Delaying Amendment",
		"DEL AM/A":	"Registration Effectiveness-Delaying Amendment - Amendment",
		"DFAN14A":	"Proxies and Info Statements",
		"DFAN14A/A":"Proxies and Info Statements",
		"DFRN14A":	"Proxies and Info Statements",
		"DFRN14A/A":"Proxies and Info Statements",
		"DSTRBRPT":	"I.B.R.D. (World Bank) Distribution of Obligations Report",
		"DSTRBRPT/A":"I.B.R.D. (World Bank) Distribution of Obligations Report - Amendment",
		"F-1":		"Registration Statements",
		"F-1/A":	"Registration Statements",
		"F-10":		"Registration Statements",
		"F-10/A":	"Registration Statements",
		"F-10POS":	"Registration Statements",
		"F-10POS/A":"Registration Statements",
		"F-1MEF":	"Registration Statements",
		"F-1MEF/A":	"Registration Statements",
		"F-2":		"Registration Statements",
		"F-2/A":	"Registration Statements",
		"F-2D":		"Registration Statements",
		"F-2D/A":	"Registration Statements",
		"F-3":		"Registration Statements",
		"F-3/A":	"Registration Statements",
		"F-3D":		"Registration Statements",
		"F-3D/A":	"Registration Statements",
		"F-3DPOS":	"Registration Statements",
		"F-3DPOS/A":"Registration Statements",
		"F-3MEF":	"Registration Statements",
		"F-3MEF/A":	"Registration Statements",
		"F-4":		"Registration Statements",
		"F-4/A":	"Registration Statements",
		"F-4MEF":	"Registration Statements",
		"F-4MEF/A":	"Registration Statements",
		"F-4 POS":	"Registration Statementss",
		"F-4 POS/A":"Registration Statements",
		"F-6":		"Registration Statements",
		"F-6/A":	"Registration Statements",
		"F-6EF":	"Registration Statements",
		"F-6EF/A":	"Registration Statements",
		"F-6 POS":	"Registration Statements",
		"F-6 POS/A":"Registration Statements",
		"F-7":		"Registration Statements",
		"F-7/A":	"Registration Statements",
		"F-8":		"Registration Statements",
		"F-8/A":	"Registration Statements",
		"F-80":		"Registration Statements",
		"F-80/A":	"Registration Statements",
		"F-80POS":	"Registration Statements",
		"F-80POS/A":"Registration Statements",
		"F-8 POS":	"Registration Statements",
		"F-8 POS/A":"Registration Statements",
		"F-9":		"Registration Statements",
		"F-9/A":	"Registration Statements",
		"F-9EF":	"Registration Statements",
		"F-9EF/A":	"Registration Statements",
		"F-9 POS":	"Registration Statements",
		"F-9 POS/A":"Registration Statements",
		"F-N":		"Appointment of Agents for Service of Process by Foreign Financial Entities",
		"F-N/A":	"Appointment of Agents for Service of Process by Foreign Financial Entities - Amendment",
		"F-X":		"Appointment of Agents for Service of Process by Foreign Non-Financial Entities",
		"F-X/A":	"Appointment of Agents for Service of Process by Foreign Non-Financial Entities - Amendment",
		"N-1":		"Registration Statements",
		"N-1/A":	"Registration Statements",
		"N-14":		"Registration Statements",
		"N-14/A":	"Registration Statements",
		"N-14 8C":	"Registration Statements",
		"N-14 8C/A":"Registration Statements",
		"N-14AE":	"Registration Statements",
		"N-14AE/A":	"Registration Statements",
		"N14AE24":	"Registration Statements",
		"N14AE24/A":"Registration Statements",
		"N14EL24":	"Registration Statements",
		"N14EL24/A":"Registration Statements",
		"N-14MEF":	"Registration Statements",
		"N-14MEF/A":"Registration Statements",
		"N-18F1":	"Notice of Elections",
		"N-18F1/A":	"Notice of Elections - Amendment",
		"N-1A":		"Registration Statements",
		"N-1A/A":	"Registration Statements",
		"N-1A EL":	"Registration Statements",
		"N-1A EL/A":"Registration Statements",
		"N-2":		"Registration Statements",
		"N-2/A":	"Registration Statements",
		"N-23C-1":	"Insider Transactions",
		"N-23C-1/A":"Insider Transactions",
		"N-23C-2":	"Insider Transactions",
		"N-23C-2/A":"Insider Transactions",
		"N-23C3A":	"Notice of Periodic Repurchase Offers",
		"N-23C3A/A":"Notice of Periodic Repurchase Offers - Amendment",
		"N-23C3B":	"Notice of Periodic Repurchase Offers",
		"N-23C3B/A":"Notice of Periodic Repurchase Offers - Amendment",
		"N-23C3C":	"Notice of Periodic Repurchase Offers",
		"N-23C3C/A":"Notice of Periodic Repurchase Offers - Amendment",
		"N-27D-1":	"Accountings for Segregated Trust Accounts",
		"N-27D-1/A":"Accountings for Segregated Trust Accounts - Amendment",
		"N-2MEF":	"Registration Statements",
		"N-2MEF/A":	"Registration Statements",
		"N-3":		"Registration Statements",
		"N-3/A":	"Registration Statements",
		"N-30B-2":	"Periodic and Interim Report Mailed to Shareholders",
		"N-30B-2/A":"Periodic and Interim Report Mailed to Shareholders - Amendment",
		"N-30D":	"Annual Reports",
		"N-30D/A":	"Annual Reports",
		"N-3 EL":	"Registration Statements",
		"N-3 EL/A":	"Registration Statements",
		"N-4":		"Registration Statements",
		"N-4/A":	"Registration Statements",
		"N-4 EL":	"Registration Statements",
		"N-4 EL/A":	"Registration Statements",
		"N-5":		"Registration Statements",
		"N-5/A":	"Registration Statements",
		"N-54A":	"Notice of Elections by Business Development Companies",
		"N-54A/A":	"Notice of Elections by Business Development Companies - Amendment",
		"N-54C":	"Notice of Withdrawals by Business Development Companies",
		"N-54C/A":	"Notice of Withdrawals by Business Development Companies - Amendment",
		"N-6":		"Registration Statements",
		"N-6/A":	"Registration Statements",
		"N-6F":		"Notice of Intentions to Elect Business-Development-Company Status",
		"N-6F/A":	"Notice of Intentions to Elect Business-Development-Company Status - Amendment",
		"N-8A":		"Registration Statements",
		"N-8A/A":	"Registration Statements",
		"N-8B-2":	"Registration Statements",
		"N-8B-2/A":	"Registration Statements",
		"N-8B-4":	"Registration Statements",
		"N-8B-4/A":	"Registration Statements",
		"N-8F":		"Registration Statements",
		"N-8F/A":	"Registration Statements",
		"N-CSR":	"Annual Reports",
		"N-CSR/A":	"Annual Reports",
		"N-CSRS":	"Annual Reports",
		"N-CSRS/A":	"Annual Reports",
		"N-PX":		"Annual Reports",
		"N-PX/A":	"Annual Reports",
		"N-Q":		"Quarterly Reports",
		"N-Q/A":	"Quarterly Reports",
		"NSAR-A":	"Annual Reports",
		"NSAR-A/A":	"Annual Reports",
		"NSAR-AT":	"Annual Reports",
		"NSAR-AT/A":"Annual Reports",
		"NSAR-B":	"Annual Reports",
		"NSAR-B/A":	"Annual Reports",
		"NSAR-BT":	"Annual Reports",
		"NSAR-BT/A":"Annual Reports",
		"NSAR-U":	"Annual Reports",
		"NSAR-U/A":	"Annual Reports",
		"NT 10-K":	"Annual Reports",
		"NT 10-K/A":"Annual Reports",
		"NT 10-Q":	"Quarterly Reports",
		"NT 10-Q/A":"Quarterly Reports",
		"NT 11-K":	"Annual Reports",
		"NT 11-K/A":"Annual Reports",
		"NT 15D2":	"Notice of Late Filings of Special Financial Report",
		"NT 15D2/A":"Notice of Late Filings of Special Financial Report - Amendment",
		"NT 20-F":	"Annual Reports",
		"NT 20-F/A":"Annual Reports",
		"NTFNCSR":	"Annual Reports",
		"NTFNCSR/A":"Annual Reports",
		"NTFNSAR":	"Annual Reports",
		"NTFNSAR/A":"Annual Reports",
		"NTN 10K":	"Annual Reports",
		"NTN 10K/A":"Annual Reports",
		"NTN 10Q":	"Quarterly Reports",
		"NTN 10Q/A":"Quarterly Reports",
		"NTN 11K":	"Annual Reports",
		"NTN 11K/A":"Annual Reports",
		"NTN15D2":	"Notice of Late Filings of Special Financial Report",
		"NTN15D2/A":"Notice of Late Filings of Special Financial Report - Amendment",
		"NTN 20F":	"Annual Reports",
		"NTN 20F/A":"Annual Reports",
		"NT-NCSR":	"Annual Reports",
		"NT-NCSR/A":"Annual Reports",
		"NT-NSAR":	"Annual Reports",
		"NT-NSAR/A":"Annual Reports",
		"POS462B":	"Registration Statements",
		"POS462B/A":"Registration Statements",
		"POS462C":	"Registration Statements",
		"POS462C/A":"Registration Statements",
		"POS 8C":	"Registration Statements",
		"POS 8C/A":	"Registration Statements",
		"POS AM":	"Registration Statements",
		"POS AM/A":	"Registration Statements",
		"POS AMC":	"Registration Statements",
		"POS AMC/A":"Registration Statements",
		"POS AMI":	"Registration Statements",
		"POS AMI/A":"Registration Statements",
		"POS EX":	"Registration Statements",
		"POS EX/A":	"Registration Statements",
		"PRE13E3":	"Proxies and Info Statements",
		"PRE13E3/A":"Proxies and Info Statements",
		"PRE 14A":	"Proxies and Info Statements",
		"PRE 14A/A":"Proxies and Info Statements",
		"PRE 14C":	"Proxies and Info Statements",
		"PRE 14C/A":"Proxies and Info Statements",
		"PREA14A":	"Proxies and Info Statements",
		"PREA14A/A":"Proxies and Info Statements",
		"PREA14C":	"Proxies and Info Statements",
		"PREA14C/A":"Proxies and Info Statements",
		"PREC14A":	"Proxies and Info Statements",
		"PREC14A/A":"Proxies and Info Statements",
		"PREC14C":	"Proxies and Info Statements",
		"PREC14C/A":"Proxies and Info Statements",
		"PREM14A":	"Proxies and Info Statements",
		"PREM14A/A":"Proxies and Info Statements",
		"PREM14C":	"Proxies and Info Statements",
		"PREM14C/A":"Proxies and Info Statements",
		"PREN14A":	"Proxies and Info Statements",
		"PREN14A/A":"Proxies and Info Statements",
		"PRER14A":	"Proxies and Info Statements",
		"PRER14A/A":"Proxies and Info Statements",
		"PRER14C":	"Proxies and Info Statements",
		"PRER14C/A":"Proxies and Info Statements",
		"PRES14A":	"Proxies and Info Statements",
		"PRES14A/A":"Proxies and Info Statements",
		"PRES14C":	"Proxies and Info Statements",
		"PRES14C/A":"Proxies and Info Statements",
		"PRRN14A":	"Proxies and Info Statements",
		"PRRN14A/A":"Proxies and Info Statements",
		"PX14A6G":	"Proxies and Info Statements",
		"PX14A6G/A":"Proxies and Info Statements",
		"PX14A6N":	"Proxies and Info Statements",
		"PX14A6N/A":"Proxies and Info Statements",
		"QRTLYRPT":	"Quarterly Reports",
		"QRTLYRPT/A":"Quarterly Reports",
		"RW":		"Registration Statements",
		"RW/A":		"Registration Statements",
		"RW WD":	"Registration Statements",
		"RW WD/A":	"Registration Statements",
		"S-1":		"Registration Statements",
		"S-1/A":	"Registration Statements",
		"S-11":		"Registration Statements",
		"S-11/A":	"Registration Statements",
		"S-11MEF":	"Registration Statements",
		"S-11MEF/A":"Registration Statements",
		"S-1MEF":	"Registration Statements",
		"S-1MEF/A":	"Registration Statements",
		"S-2":		"Registration Statements",
		"S-2/A":	"Registration Statements",
		"S-20":		"Registration Statements",
		"S-20/A":	"Registration Statements",
		"S-2MEF":	"Registration Statements",
		"S-2MEF/A":	"Registration Statements",
		"S-3":		"Registration Statements",
		"S-3/A":	"Registration Statements",
		"S-3D":		"Registration Statements",
		"S-3D/A":	"Registration Statements",
		"S-3DPOS":	"Registration Statements",
		"S-3DPOS/A":"Registration Statements",
		"S-3MEF":	"Registration Statements",
		"S-3MEF/A":	"Registration Statements",
		"S-4":		"Registration Statements",
		"S-4/A":	"Registration Statements",
		"S-4EF":	"Registration Statements",
		"S-4EF/A":	"Registration Statements",
		"S-4MEF":	"Registration Statements",
		"S-4MEF/A":	"Registration Statements",
		"S-4 POS":	"Registration Statements",
		"S-4 POS/A":"Registration Statements",
		"S-6":		"Registration Statements",
		"S-6/A":	"Registration Statements",
		"S-6EL24":	"Registration Statements",
		"S-6EL24/A":"Registration Statements",
		"S-8":		"Registration Statements",
		"S-8/A":	"Registration Statements",
		"S-8 POS":	"Registration Statements",
		"S-8 POS/A":"Registration Statements",
		"S-B":		"Registration Statements",
		"S-B/A":	"Registration Statements",
		"SB-1":		"Registration Statements",
		"SB-1/A":	"Registration Statements",
		"SB-1MEF":	"Registration Statements",
		"SB-1MEF/A":"Registration Statements",
		"SB-2":		"Registration Statements",
		"SB-2/A":	"Registration Statements",
		"SB-2MEF":	"Registration Statements",
		"SB-2MEF/A":"Registration Statements",
		"S-BMEF":	"Registration Statements",
		"S-BMEF/A":	"Registration Statements",
		"SC 13D":	"Insider Transactions",
		"SC 13D/A":	"Insider Transactions",
		"SC 13E1":	"Tender-Offer Transaction Statement",
		"SC 13E1/A":"Tender-Offer Transaction Statement - Amendment",
		"SC 13E3":	"Tender-Offer Statement - Going-Private Transactions",
		"SC 13E3/A":"Tender-Offer Statement - Going-Private Transactions - Amendment",
		"SC 13E4":	"Tender-Offer Statement - Issuer Tender Offers",
		"SC 13E4/A":"Tender-Offer Statement - Issuer Tender Offers - Amendment",
		"SC13E4F":	"Tender-Offer Statement - Issuer Tender Offers",
		"SC13E4F/A":"Tender-Offer Statement - Issuer Tender Offers - Amendment",
		"SC 13G":	"Insider Transactions",
		"SC 13G/A":	"Insider Transactions",
		"SC 14D1":	"Tender-Offer Statement - Third-Party Tender Offers",
		"SC 14D1/A":"Tender-Offer Statement - Third-Party Tender Offers - Amendment",
		"SC14D1F":	"Tender-Offer Statement - Third-Party Tender Offers",
		"SC14D1F/A":"Tender-Offer Statement - Third-Party Tender Offers - Amendment",
		"SC 14D9":	"Tender-Offer Solicitation/Recommendation Statement",
		"SC 14D9/A":"Tender-Offer Solicitation/Recommendation Statement - Amendment",
		"SC14D9C":	"Tender-Offer Solicitation/Recommendation Statement - Preliminary Communications",
		"SC14D9C/A":"Tender-Offer Solicitation/Recommendation Statement - Preliminary Communications - Amendment",
		"SC14D9F":	"Tender-Offer Solicitation/Recommendation Statement - Preliminary Communications - Foreign",
		"SC14D9F/A":"Tender-Offer Solicitation/Recommendation Statement - Preliminary Communications - Foreign - Amendment",
		"SC 14F1":	"Statement re: Changes in Majority of Directors",
		"SC 14F1/A":"Statement re: Changes in Majority of Directors - Amendment",
		"SC TO-C":	"Tender-Offer Statement - Preliminary Communications",
		"SC TO-C/A":"Tender-Offer Statement - Preliminary Communications - Amendment",
		"SC TO-I":	"Tender-Offer Statement - Issuer Tender Offers",
		"SC TO-I/A":"Tender-Offer Statement - Issuer Tender Offers - Amendment",
		"SC TO-T":	"Tender-Offer Statement - Third-Party Tender Offers",
		"SC TO-T/A":"Tender-Offer Statement - Third-Party Tender Offers - Amendment",
		"SP 15D2":	"Special Financial Report",
		"SP 15D2/A":"Special Financial Report - Amendment",
		"SUPPL":	"Supplements",
		"SUPPL/A":	"Supplements - Amendment",
		"T-3":		"Application for Qualification of Trust Indentures",
		"T-3/A":	"Application for Qualification of Trust Indentures - Amendment",
		"U-1":		"Application and Declarations",
		"U-1/A":	"Application and Declarations - Amendment",
		"U-12-IA":	"Ownership Statement by Persons Employed or Retained by Registered Holding Companies",
		"U-12-IA/A":"Ownership Statement by Persons Employed or Retained by Registered Holding Companies - Amendment",
		"U-12-IB":	"Three-Year Ownership Statement by Persons Employed or Retained by Registered Holding Companies",
		"U-12-IB/A":"Three-Year Ownership Statement by Persons Employed or Retained by Registered Holding Companies - Amendment",
		"U-13-60":	"Annual Reports",
		"U-13-60/A":"Annual Reports",
		"U-13E-1":	"Transaction Statement by Affiliate and Independent Service Companies",
		"U-13E-1/A":"Transaction Statement by Affiliate and Independent Service Companies - Amendment",
		"U-33-S":	"Annual Reports",
		"U-33-S/A":	"Annual Reports",
		"U-3A-2":	"Statement by Holding Companies Claiming Exemption",
		"U-3A-2/A":	"Statement by Holding Companies Claiming Exemption - Amendment",
		"U-3A3-1":	"Twelve-Month Statement by Banks Claiming Exemption",
		"U-3A3-1/A":"Twelve-Month Statement by Banks Claiming Exemption - Amendment",
		"U-57":		"Notice of Foreign Utility Company Status",
		"U-57/A":	"Notice of Foreign Utility Company Status - Amendment",
		"U5A":		"Registration Statements",
		"U5A/A":	"Registration Statements",
		"U5B":		"Registration Statements",
		"U5B/A":	"Registration Statements",
		"U5S":		"Annual Reports",
		"U5S/A":	"Annual Reports",
		"U-6B-2":	"Certificate of Notice of Security Issues, Renewals and Guarantees",
		"U-6B-2/A":	"Certificate of Notice of Security Issues, Renewals and Guarantees - Amendment",
		"U-7D":		"Certificate Concerning Leases of Utility Facilities",
		"U-7D/A":	"Certificate Concerning Leases of Utility Facilities - Amendment",
		"U-9C-3":	"Quarterly Reports",
		"U-9C-3/A":	"Quarterly Reports",
		"UNDER":	"Comment Letters",
		"UNDER/A":	"Comment Letters"
	};
	return secCodeTypeMap[code];
}

var eventCalendarTypeMap=null;
function EventCalendarTypes(eventName){
	if(!eventCalendarTypeMap) eventCalendarTypeMap={
		"10-Yr Note Announcement":				{"Bonds":true},
		"10-Yr Note Auction":					{"Bonds":true},
		"10-Yr Note Settlement":				{"Bonds":true},
		"10-Yr TIPS Announcement":				{"Bonds":true},
		"10-Yr TIPS Auction":					{"Bonds":true},
		"10-Yr TIPS Settlement":				{"Bonds":true},
		"2-Yr FRN Note Announcement":			{"Bonds":true},
		"2-Yr FRN Note Auction":				{"Bonds":true},
		"2-Yr FRN Note Settlement":				{"Bonds":true},
		"2-Yr Note Announcement":				{"Bonds":true},
		"2-Yr Note Auction":					{"Bonds":true},
		"2-Yr Note Settlement":					{"Bonds":true},
		"20-Yr TIPS Announcement":				{"Bonds":true},
		"20-Yr TIPS Auction":					{"Bonds":true},
		"20-Yr TIPS Settlement":				{"Bonds":true},
		"3-Month Bill Announcement":			{"Bonds":true},
		"3-Month Bill Auction":					{"Bonds":true},
		"3-Yr Note Announcement":				{"Bonds":true},
		"3-Yr Note Auction":					{"Bonds":true},
		"3-Yr Note Settlement":					{"Bonds":true},
		"30-Yr Bond Announcement":				{"Bonds":true},
		"30-Yr Bond Auction":					{"Bonds":true},
		"30-Yr Bond Settlement":				{"Bonds":true},
		"30-Yr TIPS Announcement":				{"Bonds":true},
		"30-Yr TIPS Auction":					{"Bonds":true},
		"30-Yr TIPS Settlement":				{"Bonds":true},
		"4-Week Bill Announcement":				{"Bonds":true},
		"4-Week Bill Auction":					{"Bonds":true},
		"5-Yr Note Announcement":				{"Bonds":true},
		"5-Yr Note Auction":					{"Bonds":true},
		"5-Yr Note Settlement":					{"Bonds":true},
		"5-Yr TIPS Announcement":				{"Bonds":true},
		"5-Yr TIPS Auction":					{"Bonds":true},
		"5-Yr TIPS Settlement":					{"Bonds":true},
		"52-Week Bill Announcement":			{"Bonds":true},
		"52-Week Bill Auction":					{"Bonds":true},
		"52-Week Bill Settlement":				{"Bonds":true},
		"6-Month Bill Announcement":			{"Bonds":true},
		"6-Month Bill Auction":					{"Bonds":true},
		"7-Yr Note Announcement":				{"Bonds":true},
		"7-Yr Note Auction":					{"Bonds":true},
		"7-Yr Note Settlement":					{"Bonds":true},
		"Adjusted real retail sales":			{"Growth":true},
		"Atlanta Fed Business Inflation Expectations":{"Central Bank":true},
		"ADP Employment Report":				{"Employment":true},
		"All Industry Index":					{"Growth":true},
		"Average Earnings":						{"Employment":true},
		"Bank of Canada Announcement":			{"Central Bank":true},
		"Bank of Canada Monetary Policy Report":{"Central Bank":true},
		"Bank of Japan Announcement":			{"Central Bank":true},
		"Bank Reserve Settlement":				{"Central Bank":true},
		"Beige Book":							{"Central Bank":true},
		"Bloomberg Consumer Comfort Index":		{"Consumer Surveys":true},
		"BOC Business Outlook Survey":			{"Business Surveys":true},
		"BOE Announcement":						{"Central Bank":true},
		"BoE Inflation Report":					{"Inflation":true},
		"BoE MPC Minutes":						{"Central Bank":true},
		"BoJ MPB Minutes":						{"Central Bank":true},
		"Business and Consumer Confidence":		{"Business Surveys":true},
		"Business Climate Indicator":			{"Business Surveys":true},
		"Business Inventories":					{"Business Surveys":true},
		"CBI Distributive Trades":				{"Growth":true},
		"CBI Industrial Trends Survey":			{"Business Surveys":true},
		"CFLP Manufacturing PMI":				{"Business Surveys":true},
		"Chain Store Sales":					{"Growth":true},
		"Challenger Job-Cut Report":			{"Employment":true},
		"Chicago Fed National Activity Index":	{"Central Bank":true},
		"Chicago PMI":							{"Business Surveys":true},
		"CIPS Manufacturing PMI":				{"Business Surveys":true},
		"CIPS Services PMI":					{"Business Surveys":true},
		"CIPS/PMI Manufacturing Index":			{"Business Surveys":true},
		"CIPS/PMI Services Index":				{"Business Surveys":true},
		"Claimant Unemployment Rate":			{"Employment":true},
		"Construction Spending":				{"Housing":true},
		"Consumer Confidence":					{"Consumer Surveys":true},
		"Consumer Credit":						{"Consumer Surveys":true},
		"Consumer Mfgd Goods Consumption":		{"Consumer Surveys":true},
		"Consumer Price Index":					{"Consumer Surveys":true},
		"Consumer Sentiment":					{"Consumer Surveys":true},
		"Corporate Profits":					{"Business Surveys":true},
		"CPI":									{"Inflation":true},
		"CPI Core":								{"Inflation":true},
		"Current Account":						{"Growth":true},
		"Dallas Fed Mfg Survey":				{"Central Bank":true},
		"Durable Goods Orders":					{"Growth":true},
		"E-Commerce Retail Sales":				{"Growth":true},
		"EC Consumer Confidence Flash":			{"Consumer Surveys":true},
		"EC Economic Sentiment":				{"Business Surveys":true},
		"ECB Announcement":						{"Central Bank":true},
		"ECB Lending Survey":					{"Central Bank":true},
		"EIA Natural Gas Report":				{"Misc":true},
		"EIA Petroleum Status Report":			{"Misc":true},
		"Empire State Mfg Survey":				{"Business Surveys":true},
		"Employment":							{"Employment":true},
		"Employment Cost Index":				{"Employment":true},
		"Employment Situation":					{"Employment":true},
		"Existing Home Sales":					{"Housing":true},
		"Exports":								{"Growth":true},
		"Factory Orders":						{"Business Surveys":true},
		"Farm Prices":							{"Inflation":true},
		"Fed Balance Sheet":					{"Central Bank":true},
		"Fed Chair Press Conference":			{"Central Bank":true},
		"Federal Reserve Bank Speech":			{"Central Bank":true},
		"Federal Reserve Chair Janet Yellen Speech":{"Central Bank":true},
		"Federal Reserve Vice Chair Stanley Fischer Speech":{"Central Bank":true},
		"FHFA House Price Index":				{"Housing":true},
		"FOMC Forecasts":						{"Central Bank":true},
		"FOMC Meeting Announcement":			{"Central Bank":true},
		"FOMC Meeting Begins":					{"Central Bank":true},
		"FOMC Minutes":							{"Central Bank":true},
		"Gallup US Consumer Spending Measure":	{"Consumer Surveys":true},
		"Gallup US ECI":						{"Consumer Surveys":true},
		"Gallup US Payroll to Population":		{"Consumer Surveys":true},
		"Gallup U.S. Job Creation Index":		{"Consumer Surveys":true},
		"GDP":									{"Growth":true},
		"GDP Flash":							{"Growth":true},
		"GfK Consumer Climate":					{"Consumer Surveys":true},
		"Global Composite PMI":					{"Business Surveys":true},
		"Global Manufacturing PMI":				{"Business Surveys":true},
		"Global Services PMI":					{"Business Surveys":true},
		"Gross Domestic Product":				{"Growth":true},
		"Halifax HPI":							{"Housing":true},
		"Help Wanted Index":					{"Employment":true},
		"HICP":									{"Central Bank":true},
		"HICP Flash":							{"Central Bank":true},
		"Home Loans":							{"Housing":true},
		"Household Spending":					{"Consumer Surveys":true},
		"Housing Market Index":					{"Housing":true},
		"Housing Starts":						{"Housing":true},
		"ICSC-Goldman Store Sales":				{"Growth":true},
		"Ifo Survey":							{"Business Surveys":true},
		"ILO Unemployment Rate":				{"Employment":true},
		"Import and Export Prices":				{"Growth":true},
		"Imports":								{"Growth":true},
		"Industrial Production":				{"Growth":true},
		"International Trade":					{"Growth":true},
		"IPPI":									{"Inflation":true},
		"ISM Mfg Index":						{"Business Surveys":true},
		"ISM Non-Mfg Index":					{"Business Surveys":true},
		"ISM Non-Mfg Survey":					{"Business Surveys":true},
		"Ivey Purchasing Managers' Index":		{"Business Surveys":true},
		"Jobless Claims":						{"Employment":true},
		"JOLTS":								{"Employment":true},
		"Kansas City Fed Manufacturing Index":	{"Central Bank":true},
		"KOF Swiss Leading Indicator":			{"Growth":true},
		"Labour cost index":					{"Employment":true},
		"Labour Force Survey":					{"Employment":true},
		"Labor Market Conditions Index":		{"Employment":true},
		"Labour Market Report":					{"Employment":true},
		"Leading Indicators":					{"Growth":true},
		"M3 Money Supply":						{"Central Bank":true},
		"M4 Money Supply":						{"Central Bank":true},
		"Machine Orders":						{"Growth":true},
		"Manufacturers' Orders":				{"Growth":true},
		"Manufacturing and mining survey":		{"Business Surveys":true},
		"Manufacturing Output":					{"Growth":true},
		"Manufacturing Sales":					{"Growth":true},
		"MBA Mortgage Applications":			{"Housing":true},
		"MBA Purchase Applications":			{"Growth":true},
		"Merchandise Trade":					{"Growth":true},
		"Merchandise trade":					{"Growth":true},
		"Merchandise Trade Balance":			{"Growth":true},
		"Money Supply":							{"Central Bank":true},
		"Monster Employment Index":				{"Employment":true},
		"Monthly GDP":							{"Growth":true},
		"Motor Vehicle Sales":					{"Growth":true},
		"Nationwide HPI":						{"Housing":true},
		"New Home Sales":						{"Housing":true},
		"NFIB Small Business Optimism Index":	{"Business Surveys":true},
		"Pending Home Sales Index":				{"Housing":true},
		"Peoples Bank of China":				{"Central Bank":true},
		"Personal Income and Outlays":			{"Consumer Surveys":true},
		"Philadelphia Fed Survey":				{"Central Bank":true},
		"Philadelphia Fed Business Outlook Survey":{"Central Bank":true},
		"PMI Composite":						{"Business Surveys":true},
		"PMI Composite FLASH":					{"Business Surveys":true},
		"PMI Construction":						{"Business Surveys":true},
		"PMI Flash Mfg Index":					{"Business Surveys":true},
		"PMI Manufacturing Index":				{"Business Surveys":true},
		"PMI Manufacturing Index Flash":		{"Business Surveys":true},
		"PMI Services Flash":					{"Business Surveys":true},
		"PMI Services Index":					{"Business Surveys":true},
		"PMI Services Index Flash":				{"Business Surveys":true},
		"POP":									{"Misc":true},
		"PPI":									{"Inflation":true},
		"PPI-FD":								{"Inflation":true},
		"Producer and Import Price Index":		{"Inflation":true},
		"Producer Input Price Index":			{"Inflation":true},
		"Producer Price Index":					{"Inflation":true},
		"Productivity and Costs":				{"Growth":true},
		"Public Sector Finances":				{"Misc":true},
		"Quarterly Services Survey":			{"Business Surveys":true},
		"RBA  Announcement":					{"Central Bank":true},
		"RBA Meeting Minutes":					{"Central Bank":true},
		"RBC CASH Index":						{"Central Bank":true},
		"RBNZ Announcement":					{"Central Bank":true},
		"Redbook":								{"Business Surveys":true},
		"Reserve Bank of India":				{"Central Bank":true},
		"Residential Property Prices":			{"Housing":true},
		"Retail Sales":							{"Growth":true},
		"Retail Trade":							{"Growth":true},
		"Reuters Manufacturing PMI":			{"Business Surveys":true},
		"Reuters Services PMI":					{"Business Surveys":true},
		"Richmond Fed Manufacturing Index":		{"Central Bank":true},
		"RMPI":									{"Business Surveys":true},
		"S&P Case-Shiller HPI":					{"Housing":true},
		"SECO Consumer Climate":				{"Consumer Surveys":true},
		"SNB Monetary Policy Assessment":		{"Central Bank":true},
		"Speech":								{"Central Bank":true},
		" Speech":								{"Central Bank":true},
		"State Street Investor Confidence Index":{"Consumer Surveys":true},
		"SVME Purchasing Managers' Index":		{"Business Surveys":true},
		"Tankan":								{"Business Surveys":true},
		"Tankan Small Mfrs":					{"Business Surveys":true},
		"Tertiary Index":						{"Growth":true},
		"Treasury Budget":						{"Central Bank":true},
		"Treasury International Capital":		{"Central Bank":true},
		"Treasury STRIPS":						{"Central Bank":true},
		"UBS Consumption Index":				{"Consumer Surveys":true},
		"Unemployment":							{"Employment":true},
		"Unemployment Rate":					{"Employment":true},
		"Unemployment Rate - East":				{"Employment":true},
		"Unemployment Rate - West":				{"Employment":true},
		"Wholesale Trade":						{"Growth":true},
		"WPI":									{"Inflation":true},
		"ZEW Survey":							{"Misc":true}
	};
	return eventCalendarTypeMap[eventName];
}

function entityDecode(item){
	return item.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");
}

function commaInt(number,naIfNull){
	if(number==null || typeof number=="undefined") return naIfNull?"N/A":"";
	if(!isNaN(number)) number=number.toString();
	var txt=number;
	if(number.indexOf(".")>-1) txt=number.split(".")[0];
	var res="";
	var cnt=0;
	for(var x=txt.length-1;x>=0;x--){
		if(txt[x]!='-'){
			if(cnt>0 && cnt%3==0) res=","+res;
		}
		res=txt[x]+res;
		cnt++;
	}
	if(number.indexOf(".")>-1) res+="."+number.split(".")[1];
	return res;
}

function naIfNull(x){
	if(x===null || typeof(x)=="undefined") return "N/A";
	return x;
}

function condenseInt(txt,naIfNull){
	if(txt==null || typeof txt=="undefined") return naIfNull?"N/A":"";
	if(txt>0){
		if(txt>1000000000) txt=Math.round(txt/10000000)/100 + "b";
		else if(txt>1000000) txt=Math.round(txt/10000)/100 + "m";
		else if(txt>1000) txt=Math.round(txt/10)/100 + "k";
		else txt=txt.toFixed(0);
	}else{
		if(txt<-1000000000) txt=Math.round(txt/10000000)/100 + "b";
		else if(txt<-1000000) txt=Math.round(txt/10000)/100 + "m";
		else if(txt<-1000) txt=Math.round(txt/10)/100 + "k";
		else txt=txt.toFixed(0);
	}
	return txt;
};

function queryStringValues(name,qs){
	var res=[];
	if(qs.indexOf("?")==0) qs=qs.substr(1);
	else if(qs.indexOf("#")==0) qs=qs.substr(1);
	var parms=qs.split("&");
	for(var p=0;p<parms.length;p++){
		var t=parms[p].split("=");
		if(decodeURI(t[0])==name) res.push(decodeURIComponent(t[1]));
	}
	return res;
}

//get symbol lists from style sheet
function getSymbolList(className){
	if(!window.symbolMap) symbolMap={};
	if(symbolMap[className]) return symbolMap[className];
	var e=document.getElementById("list_div");
	if(!e){
		e=document.createElement('div');
		e.id="list_div";
		document.body.appendChild(e);
	}
	e.className=className;
	var f=getComputedStyle(e).getPropertyValue("content");
	if(!f || f=="normal") f=getComputedStyle(e).getPropertyValue("font-family");  //IE8
	f=f.replace(/\"/g,"'").replace(/'/g,'');
	if(f=="") symbolMap[className]=[];
	else symbolMap[className]=f.split(',');
	
	return symbolMap[className];
}

//get index entitlement: returns 0 (eod), 1 (delayed) or 2 (real time)
function getIndexEntitlement(symbol){
	var symbols=getSymbolList("ciq-index-list").concat(getSymbolList("ciq-ticker-list"));
	var times=getSymbolList("ciq-index-times").concat(getSymbolList("ciq-ticker-times"));
	var isDelayed=false;
	for(var i=0;i<symbols.length;i++){
		if(symbols[i].indexOf(".IND")==-1) continue;
		if(symbols[i]==symbol && times[i]==2) return 2;
		if(symbols[i].split(".")[1]==symbol.split(".")[1] && times[i]>0){
			isDelayed=true;
		}
	}
	return isDelayed?1:0;
}

//get external url from style sheet
function getUrlFromStylesheet(className){
	var e=document.getElementById("url_div");
	if(!e){
		e=document.createElement('div');
		e.id="url_div";
		document.body.appendChild(e);
	}
	e.className=className;
	var f=getComputedStyle(e).getPropertyValue("content");
	if(!f || f=="normal") f=getComputedStyle(e).getPropertyValue("font-family");  //IE8
	if(f){
		f=f.replace(/\"/g,"'").replace(/'/g,'');
	}
	return f;
}


var pageRegistry={
	"calendar":"calendar.html",
	"chart":"chart.html",
	"company":"company.html",
	"config":"configure.html",
	"filings":"filings.html",
	"financials":"financials.html",
	"insiders":"insiders.html",
	"markets":"markets.html",
	"news":"news.html",
	"overview":"overview.html",
	"quoteboard":"quoteboard.html",
	"research":"javascript:void(0);"
};
function pageName(key){
	return pageRegistry[key];
}

/*  BOO! can't use yet...IE8 :(

HTMLElement.prototype.appendClass = function(add) {
	if(add === "") return;
    var newClassName = add;
    var i;
    var classes = this.className.split(" ");
    for(i = 0; i < classes.length; i++) {
        if(classes[i] !== add && classes[i] !== " ") {
            newClassName += " " + classes[i];
        }
    }
    this.className = newClassName;
};

HTMLElement.prototype.unappendClass = function(remove) {
 	if(remove === "") return;
   var newClassName = "";
    var i;
    var classes = this.className.split(" ");
    for(i = 0; i < classes.length; i++) {
        if(classes[i] !== remove) {
        	if(newClassName !== "") newClassName += " ";
            newClassName += classes[i];
        }
    }
    this.className = newClassName;
};

HTMLElement.prototype.hasClass = function(cls) {
    if(cls === "") return false;
	var i;
    var classes = this.className.split(" ");
    for(i = 0; i < classes.length; i++) {
        if(classes[i] === cls) return true;
    }
    return false;
};

*/

function appendClass(element, add) {
    if(add === "") return;
    var newClassName = add;
    var i;
    var classes = element.className.split(" ");
    for(i = 0; i < classes.length; i++) {
        if(classes[i] !== add && classes[i] !== " ") {
            newClassName += " " + classes[i];
        }
    }
    element.className = newClassName;
}

function unappendClass(element,remove) {
    if(remove === "") return;
    var newClassName = "";
    var i;
    var classes = element.className.split(" ");
    for(i = 0; i < classes.length; i++) {
        if(classes[i] !== remove) {
        	if(newClassName !== "") newClassName += " ";
            newClassName += classes[i];
        }
    }
    element.className = newClassName;
}

function hasClass(element,cls) {
    if(cls === "") return false;
    var i;
    var classes = element.className.split(" ");
    for(i = 0; i < classes.length; i++) {
        if(classes[i] === cls) return true;
    }
    return false;
}

/**
 * Gets styles by a classname
 * 
 * @notice The className must be 1:1 the same as in the CSS
 * @param string className_
 */
function getStyle(className_,styleName_) {

    var styleSheets = document.styleSheets;
    var styleSheetsLength = styleSheets.length;
    for(var i = styleSheetsLength-1; i >= 0; i--){
        var classes = styleSheets[i].rules || styleSheets[i].cssRules;
        if(!classes) continue;
        var classesLength = classes.length;
        var classText=null;
        for (var x = 0; x < classesLength; x++) {
            if (classes[x].selectorText == className_) {
                if(classes[x].cssText){
                	classText=classes[x].cssText;
                	if(classText) classText=classText.split("{")[1].split("}")[0];
                } else {
                	classText=classes[x].style.cssText;
                }
                break;
            }
        }
        if(classText){
        	classText=classText.split(";");
        	for(var cls=0; cls<classText.length; cls++){
        		var pair=classText[cls].split(":");
        		if(pair[0].replace(/^\s+|\s+$/g, "").toLowerCase()==styleName_.toLowerCase()) return pair[1].replace(/^\s+|\s+$/g, "");
        	}
        }
    }
    return null;
}

//IE8 polyfills
if(!document.getElementsByClassName) {
    document.getElementsByClassName = function(className) {
    	var selectors=className.split(" ");
    	var selString="";
    	for(var i=0;i<selectors.length;i++){
    		selString+="."+selectors[i];
    	}
        return this.querySelectorAll(selString);
    };
    Element.prototype.getElementsByClassName = document.getElementsByClassName;
}
//From https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys
if (!Object.keys) {
  Object.keys = (function () {
    'use strict';
    var hasOwnProperty = Object.prototype.hasOwnProperty,
        hasDontEnumBug = !({toString: null}).propertyIsEnumerable('toString'),
        dontEnums = [
          'toString',
          'toLocaleString',
          'valueOf',
          'hasOwnProperty',
          'isPrototypeOf',
          'propertyIsEnumerable',
          'constructor'
        ],
        dontEnumsLength = dontEnums.length;

    return function (obj) {
      if (typeof obj !== 'object' && (typeof obj !== 'function' || obj === null)) {
        throw new TypeError('Object.keys called on non-object');
      }

      var result = [], prop, i;

      for (prop in obj) {
        if (hasOwnProperty.call(obj, prop)) {
          result.push(prop);
        }
      }

      if (hasDontEnumBug) {
        for (i = 0; i < dontEnumsLength; i++) {
          if (hasOwnProperty.call(obj, dontEnums[i])) {
            result.push(dontEnums[i]);
          }
        }
      }
      return result;
    };
  }());
}

if(!window.JSON){
	var fileref=document.createElement('script');
	fileref.setAttribute("type","text/javascript");
	fileref.setAttribute("src", "js/min/json-3.3.2.min.js");
	if (typeof fileref!="undefined"){
		document.getElementsByTagName("head")[0].appendChild(fileref);
	}
}

//from http://stackoverflow.com/questions/21797258/getcomputedstyle-like-javascript-function-for-ie8
if (!window.getComputedStyle) {
    window.getComputedStyle = function(el, pseudo) {
        this.el = el;
        this.getPropertyValue = function(prop) {
            var re = /(\-([a-z]){1})/g;
            if (prop == 'float') prop = 'styleFloat';
            if (re.test(prop)) {
                prop = prop.replace(re, function () {
                    return arguments[2].toUpperCase();
                });
            }
            return el.currentStyle[prop] ? el.currentStyle[prop] : null;
        };
        return this;
    };
}

// IE8 addEventListener polyfill https://gist.github.com/jonathantneal/3748027
!window.addEventListener && (function (WindowPrototype, DocumentPrototype, ElementPrototype, addEventListener, removeEventListener, dispatchEvent, registry) {
	WindowPrototype[addEventListener] = DocumentPrototype[addEventListener] = ElementPrototype[addEventListener] = function (type, listener) {
		var target = this;

		registry.unshift([target, type, listener, function (event) {
			event.currentTarget = target;
			event.preventDefault = function () { event.returnValue = false };
			event.stopPropagation = function () { event.cancelBubble = true };
			event.target = event.srcElement || target;
			if(typeof listener=="function")
				listener.call(target, event);
			else if(typeof listener=="object" && typeof listener.handleEvent=="function")
				listener.handleEvent.call(listener, event);
		}]);

		this.attachEvent("on" + type, registry[0][3]);
	};

	WindowPrototype[removeEventListener] = DocumentPrototype[removeEventListener] = ElementPrototype[removeEventListener] = function (type, listener) {
		for (var index = 0, register; register = registry[index]; ++index) {
			if (register[0] == this && register[1] == type && register[2] == listener) {
				return this.detachEvent("on" + type, registry.splice(index, 1)[0][3]);
			}
		}
	};

	WindowPrototype[dispatchEvent] = DocumentPrototype[dispatchEvent] = ElementPrototype[dispatchEvent] = function (eventObject) {
		return this.fireEvent("on" + eventObject.type, eventObject);
	};
})(Window.prototype, HTMLDocument.prototype, Element.prototype, "addEventListener", "removeEventListener", "dispatchEvent", []);

// IE8 bind() support: http://stackoverflow.com/questions/11054511/how-to-handle-lack-of-javascript-object-bind-method-in-ie-8
if (!Function.prototype.bind) {
	Function.prototype.bind = function(oThis) {
	    if (typeof this !== 'function') {
	      // closest thing possible to the ECMAScript 5
	      // internal IsCallable function
	      throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');
	    }

	    var aArgs   = Array.prototype.slice.call(arguments, 1),
	        fToBind = this,
	        fNOP    = function() {},
	        fBound  = function() {
	          return fToBind.apply(this instanceof fNOP && oThis
	                 ? this
	                 : oThis,
	                 aArgs.concat(Array.prototype.slice.call(arguments)));
	        };

	    fNOP.prototype = this.prototype;
	    fBound.prototype = new fNOP();

	    return fBound;
	};
}

